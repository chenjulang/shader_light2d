{
  "ver": "1.0.15",
  "uuid": "c2657391-9a93-48cb-abba-cd91b3703145",
  "compiledShaders": [
    {
      "vert": "\n#define _IS_VERT_SHADER 1\n\nprecision highp float;\n\n#define PI 3.14159265359\n#define TWOPI 6.28318530718\n\nuniform mat4 cc_matViewProj;\nattribute vec3 a_position;\nattribute vec2 a_uv0;\nvarying vec2 uv0;\nvoid main () {\n    vec4 pos = cc_matViewProj * vec4(a_position, 1);\n    gl_Position = pos;\n    uv0 = a_uv0;\n}\n\n\n",
      "frag": "\n#define _IS_FRAG_SHADER 1\n\nprecision highp float;\n\n#define TWO_PI 6.28318530718\n#define PI 3.141592653\n\nuniform vec3 iResolution;\nuniform float time;\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\n\n#define LOOP_COUNT_I 64\n#define LOOP_COUNT_F 64.0\n\n#define STEPS 3\n\n#define LIGHT_SPEED .5\n#define HARDNESS 2.0\n\nstruct ray {\n\tvec2 t;\n\tvec2 p;\n\tvec2 d;\n};\n\nfloat scene (in vec2 p) {\n  float iTime = time;\n  \n\n\tp -= vec2 (250,250);\n\t\n\tfloat sn = sin (iTime / 2.0);\n\tfloat cs = cos (iTime / 2.0);\n  sn=1.;cs=1.;\n\t\n\tfloat f1 = dot (vec2 (sn,-cs), p);\n\tfloat f2 = dot (vec2 (cs, sn), p);\n\tfloat f = max (f1*f1, f2*f2);\n\t\n\t\n\t\n\t\n\treturn 1000.0 / (f + 1000.0);\n}\n\nray newRay (in vec2 origin, in vec2 target) {\n\tray r;\n\t\n\tr.t = target;\n\tr.p = origin;\n\tr.d = (target - origin) / float (STEPS);\n\t\n\treturn r;\n}\n\nvoid rayMarch (inout ray r) {\n\tr.p += r.d * clamp (HARDNESS - scene (r.p) * HARDNESS * 2.0, 0.0, LIGHT_SPEED);\n}\n\nvec3 light (in ray r, in vec3 color) {\n\treturn color / (dot (r.p, r.p) + color);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n  float iTime = time;\n  vec2 uv = vec2(uv0.x,1.-uv0.y);\n  \n  \n  uv*=1.;\n  uv *= vec2(1280.,720.);\n\t\n\tray r0 = newRay (uv, vec2 (0, 0));\n\tfor (int i = 0; i < STEPS; i++) {\n\t\trayMarch (r0);\n\t}\n\t\n\tr0.p -= r0.t;\n\tvec3 light1 = light (r0, vec3 (0.3, 0.2, 0.1) * 20000.0);\n\t\n\tfloat f = clamp (scene (uv) * 200.0 - 100.0, 0.0, 3.0);\n\tf = 0.;\n\n\tfragColor = vec4 ((light1 ) * (1. + f), 1.0);\n}\n\nvoid main () {\n  mainImage(gl_FragColor,uv0);\n}\n\n\n"
    }
  ],
  "subMetas": {}
}